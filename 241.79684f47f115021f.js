"use strict";(self.webpackChunkl_admin_angular=self.webpackChunkl_admin_angular||[]).push([[241],{5241:(O,d,e)=>{e.r(d),e.d(d,{default:()=>U});var s=e(6814),r=e(6223),l=e(95),i=e(3599),p=e(824),g=e(2840),m=e(2669),u=e(6042),E=e(9662),h=e(2595),v=e(9561),z=e(5164),n=e(5879),b=e(9515),L=e(6644),M=e(3076),D=e(3460),y=e(676),A=e(855),I=e(1958);let U=(()=>{class c{constructor(t,a,_,C,T,Z){this.fb=t,this.translate=a,this.fileService=_,this.userService=C,this.message=T,this.store=Z,this.avatar=this.store.select(v.P.avatar),this.loading=!1,this.fileLoading=!1,this.customRequestHandler=o=>(this.fileLoading=!0,this.fileService.upload(o.file,f=>{o.onProgress&&o.onProgress({percent:f},o.file)}).subscribe({next:f=>{o.onSuccess&&o.onSuccess(f,o.file,null),this.userService.editUserInfo({avatar:f}).subscribe({next:()=>{this.store.dispatch(z.V.setUserInfo({payload:{avatar:f}})),this.translate.get("editAvatar").subscribe(S=>{this.translate.get("whatSuccess",{value:S}).subscribe(B=>{this.message.success(B),this.fileLoading=!1})})},error:()=>{this.fileLoading=!1}})},error:()=>{o.onError&&o.onError(!1,o.file),this.fileLoading=!1}})),this.form=this.fb.group({nickname:["",r.kI.required],profile:[""]}),this.store.select(v.P.userInfo).subscribe(o=>{this.form.setValue({nickname:o.nickname,profile:o.profile})})}submitHandler(){if(this.form.valid){this.loading=!0;const t=this.form.value;this.userService.editUserInfo(t).subscribe({next:()=>{this.store.dispatch(z.V.setUserInfo({payload:t})),this.translate.get("updateBasicInfo").subscribe(a=>{this.translate.get("whatSuccess",{value:a}).subscribe(_=>{this.message.success(_),this.loading=!1})})},error:()=>{this.loading=!1}})}else Object.values(this.form.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}}return c.\u0275fac=function(t){return new(t||c)(n.Y36(r.QS),n.Y36(b.sK),n.Y36(L.I),n.Y36(M.K),n.Y36(D.dD),n.Y36(y.yh))},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-basic-info"]],standalone:!0,features:[n.jDz],decls:34,vars:36,consts:[[1,"basic-info-title"],["nz-row",""],["nz-col","",3,"nzSpan"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nz-input","","formControlName","nickname",3,"placeholder"],["nz-input","","formControlName","profile",3,"rows","placeholder"],["nz-button","","nzType","primary",3,"nzLoading"],["nz-col","",2,"text-align","center",3,"nzSpan"],[1,"basic-info-image"],[3,"nzSpinning"],[1,"basic-info-image-content"],["nz-image","","width","200px","height","200px","alt","",3,"nzSrc"],["nzAccept","image/*",1,"basic-info-image-edit",3,"nzLimit","nzShowUploadList","nzCustomRequest"],["nz-button","","nzShape","circle","nzSize","large"],["nz-icon","","nzType","edit"]],template:function(t,a){1&t&&(n.TgZ(0,"h1",0),n._uU(1),n.ALo(2,"async"),n.qZA(),n.TgZ(3,"div",1)(4,"div",2)(5,"form",3),n.NdJ("ngSubmit",function(){return a.submitHandler()}),n.TgZ(6,"nz-form-item")(7,"nz-form-label"),n._uU(8),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"nz-form-control",4),n.ALo(11,"async"),n._UZ(12,"input",5),n.ALo(13,"async"),n.qZA()(),n.TgZ(14,"nz-form-item")(15,"nz-form-label"),n._uU(16),n.ALo(17,"async"),n.qZA(),n.TgZ(18,"nz-form-control",4),n.ALo(19,"async"),n._UZ(20,"textarea",6),n.ALo(21,"async"),n.qZA()(),n.TgZ(22,"button",7),n._uU(23),n.ALo(24,"async"),n.qZA()()(),n.TgZ(25,"div",8)(26,"div",9)(27,"nz-spin",10)(28,"div",11),n._UZ(29,"img",12),n.ALo(30,"async"),n.qZA()(),n.TgZ(31,"nz-upload",13)(32,"button",14),n._UZ(33,"span",15),n.qZA()()()()()),2&t&&(n.xp6(1),n.Oqu(n.lcZ(2,18,a.translate.get("basicInfo"))),n.xp6(3),n.Q6J("nzSpan",14),n.xp6(1),n.Q6J("formGroup",a.form),n.xp6(3),n.Oqu(n.lcZ(9,20,a.translate.get("nickname"))),n.xp6(2),n.Q6J("nzErrorTip",n.lcZ(11,22,a.translate.get("pleaseEnterNickname"))),n.xp6(2),n.Q6J("placeholder",n.lcZ(13,24,a.translate.get("pleaseEnterNickname"))),n.xp6(4),n.Oqu(n.lcZ(17,26,a.translate.get("profile"))),n.xp6(2),n.Q6J("nzErrorTip",n.lcZ(19,28,a.translate.get("pleaseEnterNickname"))),n.xp6(2),n.Q6J("rows",4)("placeholder",n.lcZ(21,30,a.translate.get("profile"))),n.xp6(2),n.Q6J("nzLoading",a.loading),n.xp6(1),n.hij(" ",n.lcZ(24,32,a.translate.get("updateBasicInfo"))," "),n.xp6(2),n.Q6J("nzSpan",10),n.xp6(2),n.Q6J("nzSpinning",a.fileLoading),n.xp6(2),n.Q6J("nzSrc",n.lcZ(30,34,a.avatar)),n.xp6(2),n.Q6J("nzLimit",1)("nzShowUploadList",!1)("nzCustomRequest",a.customRequestHandler))},dependencies:[s.ez,s.Ov,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.Jb,l.t3,l.SK,i.U5,i.Lr,i.Nx,i.iK,i.Fd,p.o7,p.Zp,g.sL,g.ix,A.w,I.dQ,m.j,m.W,u.Gb,u.Ie,E.cS,E.FY,h.PV,h.Ls],styles:["html[_ngcontent-%COMP%]{--ant-primary-color: #1890ff;--ant-primary-color-hover: #40a9ff;--ant-primary-color-active: #096dd9;--ant-primary-color-outline: rgba(24, 144, 255, .2);--ant-primary-1: #e6f7ff;--ant-primary-2: #bae7ff;--ant-primary-3: #91d5ff;--ant-primary-4: #69c0ff;--ant-primary-5: #40a9ff;--ant-primary-6: #1890ff;--ant-primary-7: #096dd9;--ant-primary-color-deprecated-pure: ;--ant-primary-color-deprecated-l-35: #cbe6ff;--ant-primary-color-deprecated-l-20: #7ec1ff;--ant-primary-color-deprecated-t-20: #46a6ff;--ant-primary-color-deprecated-t-50: #8cc8ff;--ant-primary-color-deprecated-f-12: rgba(24, 144, 255, .12);--ant-primary-color-active-deprecated-f-30: rgba(230, 247, 255, .3);--ant-primary-color-active-deprecated-d-02: #dcf4ff;--ant-success-color: #52c41a;--ant-success-color-hover: #73d13d;--ant-success-color-active: #389e0d;--ant-success-color-outline: rgba(82, 196, 26, .2);--ant-success-color-deprecated-bg: #f6ffed;--ant-success-color-deprecated-border: #b7eb8f;--ant-error-color: #ff4d4f;--ant-error-color-hover: #ff7875;--ant-error-color-active: #d9363e;--ant-error-color-outline: rgba(255, 77, 79, .2);--ant-error-color-deprecated-bg: #fff2f0;--ant-error-color-deprecated-border: #ffccc7;--ant-warning-color: #faad14;--ant-warning-color-hover: #ffc53d;--ant-warning-color-active: #d48806;--ant-warning-color-outline: rgba(250, 173, 20, .2);--ant-warning-color-deprecated-bg: #fffbe6;--ant-warning-color-deprecated-border: #ffe58f;--ant-info-color: #1890ff;--ant-info-color-deprecated-bg: #e6f7ff;--ant-info-color-deprecated-border: #91d5ff}.basic-info-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:28px;margin-bottom:24px}.basic-info-image[_ngcontent-%COMP%]{display:inline-block;position:relative}.basic-info-image-content[_ngcontent-%COMP%]{display:inline-block;border-radius:50%;overflow:hidden;border:1px solid #d9d9d9}.basic-info-image-edit[_ngcontent-%COMP%]{position:absolute;bottom:0;left:18px}"]}),c})()},9561:(O,d,e)=>{e.d(d,{P:()=>l});var s=e(676);const r=(0,s.ZF)("userInfo"),l={userInfo:r,nickname:(0,s.P1)(r,i=>i.nickname),avatar:(0,s.P1)(r,i=>i.avatar)}}}]);