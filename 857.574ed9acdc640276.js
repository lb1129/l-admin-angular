"use strict";(self.webpackChunkl_admin_angular=self.webpackChunkl_admin_angular||[]).push([[857],{9857:(W,d,t)=>{t.r(d),t.d(d,{default:()=>B});var M=t(5861),g=t(8145),m=t(6814),a=t(6223),s=t(3599),E=t(824),c=t(2840),f=t(2078),v=t(7776),D=t(5164),L=t(9064),n=t(5879),h=t(9515),z=t(2333),T=t(3076),A=t(2042),U=t(676),C=t(2735),P=t(95),y=t(855),I=t(1958);let B=(()=>{class e{constructor(r,o,_,i,l,u,p,K,Z){this.router=r,this.fb=o,this.notification=_,this.translate=i,this.authService=l,this.userService=u,this.menuService=p,this.store=K,this.tokenLocalforage=Z,this.loading=!1,this.form=this.fb.group({username:["",a.kI.required],password:["",a.kI.required]})}submitHandler(){var _,r=this;this.form.valid?(this.loading=!0,this.authService.login(this.form.value).subscribe({next:(_=(0,M.Z)(function*(i){yield r.tokenLocalforage.set(i.data),r.menuService.getMenu().subscribe(l=>{r.store.dispatch(L.b.setMenu({payload:l.data})),r.userService.getUserInfo().subscribe(u=>{r.store.dispatch(D.V.setUserInfo({payload:u.data})),r.router.navigate([""],{replaceUrl:!0}),setTimeout(()=>{r.translate.get("welcome").subscribe(p=>{r.notification.success(p,u.data.nickname)})},200),r.loading=!1})})}),function(l){return _.apply(this,arguments)}),error:()=>{this.loading=!1}})):Object.values(this.form.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))})}}return e.\u0275fac=function(r){return new(r||e)(n.Y36(g.F0),n.Y36(a.QS),n.Y36(f.zb),n.Y36(h.sK),n.Y36(z.e),n.Y36(T.K),n.Y36(A.h),n.Y36(U.yh),n.Y36(C.h9))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[n.jDz],decls:24,vars:23,consts:[["nz-form","",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nzPrefixIcon","user","nzSize","large",1,"input-group"],["nz-input","","formControlName","username",3,"placeholder"],["nzPrefixIcon","lock","nzSize","large",1,"input-group"],["type","password","nz-input","","formControlName","password",3,"placeholder"],[2,"display","block"],["routerLink","/register"],["routerLink","/findPassword",2,"float","right"],["nz-button","","nzType","primary","nzBlock","","nzSize","large",3,"nzLoading"]],template:function(r,o){1&r&&(n.TgZ(0,"app-layout")(1,"form",0),n.NdJ("ngSubmit",function(){return o.submitHandler()}),n.TgZ(2,"nz-form-item")(3,"nz-form-control",1),n.ALo(4,"async"),n.TgZ(5,"nz-input-group",2),n._UZ(6,"input",3),n.ALo(7,"async"),n.qZA()()(),n.TgZ(8,"nz-form-item")(9,"nz-form-control",1),n.ALo(10,"async"),n.TgZ(11,"nz-input-group",4),n._UZ(12,"input",5),n.ALo(13,"async"),n.qZA()()(),n.TgZ(14,"nz-form-item",6)(15,"a",7),n._uU(16),n.ALo(17,"async"),n.qZA(),n.TgZ(18,"a",8),n._uU(19),n.ALo(20,"async"),n.qZA()(),n.TgZ(21,"button",9),n._uU(22),n.ALo(23,"async"),n.qZA()()()),2&r&&(n.xp6(1),n.Q6J("formGroup",o.form),n.xp6(2),n.Q6J("nzErrorTip",n.lcZ(4,9,o.translate.get("pleaseEnterAccount"))),n.xp6(3),n.Q6J("placeholder",n.lcZ(7,11,o.translate.get("account"))),n.xp6(3),n.Q6J("nzErrorTip",n.lcZ(10,13,o.translate.get("pleaseEnterPassword"))),n.xp6(3),n.Q6J("placeholder",n.lcZ(13,15,o.translate.get("password"))),n.xp6(4),n.Oqu(n.lcZ(17,17,o.translate.get("signUp"))),n.xp6(3),n.Oqu(n.lcZ(20,19,o.translate.get("forgotPassword"))),n.xp6(2),n.Q6J("nzLoading",o.loading),n.xp6(1),n.hij(" ",n.lcZ(23,21,o.translate.get("login"))," "))},dependencies:[g.Bz,g.rH,m.ez,m.Ov,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,s.U5,P.t3,P.SK,s.Lr,s.Nx,s.Fd,E.o7,E.Zp,E.gB,c.sL,c.ix,y.w,I.dQ,f.L8,v.default],styles:[".input-group[_ngcontent-%COMP%]     .anticon{color:#00000040}"]}),e})()}}]);